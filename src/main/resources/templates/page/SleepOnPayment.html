<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>title</title>
    <meta lang="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src=/js/bootstrap.bundle.js></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            // í˜ì´ì§€ ë¡œë“œ ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ ì¹´ë“œ ê²°ì œ ì •ë³´ë¥¼ ë³´ì´ê²Œ ì„¤ì •
            $('#cardPayment').removeClass('hidden');
            $('#bankPayment').addClass('hidden');
            $('#paymentMethod').val('card');

            $('#paymentType').on('change', function () {
                var paymentType = $(this).val();
                if (paymentType === 'card') {
                    $('#cardPayment').removeClass('hidden');
                    $('#bankPayment').addClass('hidden');
                    $('#paymentMethod').val('card');
                } else {
                    $('#cardPayment').addClass('hidden');
                    $('#bankPayment').removeClass('hidden');
                    $('#paymentMethod').val('bank');
                }
            });

            $('#reserveBtn').on('click', function () {
                const paymentType = $('#paymentType').val();
                const cardNumber = $('#cardNumber').val();
                const cardCvc = $('#cardCVC').val();
                const cardExpiry = $('#cardExpiry').val();
                const bankName = $('#bankName').val();
                const accountNumber = $('#accountNumber').val();
                if (paymentType === "card") {
                    if (!cardNumber || !cardCvc || !cardExpiry) {
                        alert("ê²°ì œ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                        return false;
                    }
                } else {
                    if (!bankName || !accountNumber) {
                        alert("ê²°ì œ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                        return false;
                    }
                }
                const contentId = $('#contentId').val();
                const checkIn = $('#checkIn').val();
                const checkOut = $('#checkOut').val();
                const roomTitle = $("#roomtitle").val();
                const userCnt = $('#userCnt').val();

                // ì„ íƒëœ ê°’ë“¤ì„ URL íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ í˜ì´ì§€ ì´ë™
                window.location.href = "/SleepOn/reserve?contentId=" + encodeURIComponent(contentId)
                    + "&checkIn=" + encodeURIComponent(checkIn)
                    + "&checkOut=" + encodeURIComponent(checkOut)
                    + "&roomtitle=" + encodeURIComponent(roomTitle)
                    + "&userCnt=" + encodeURIComponent(userCnt);
            });

            $('.back-btn').on('click', function () {
                history.back();
            });
        });
    </script>
</head>
<body class="paymentBody">
<header th:replace="~{layout/header :: header-basic}"></header>
<header th:replace="~{layout/header :: header-banner}"></header>
<main>
    <section class="container mx-auto">
        <div class="paymentContainer">
            <div class="paymentCard">
                <div class="paymentHeader">ì˜ˆì•½ ì •ë³´</div>
                <div class="paymentInfo">
                    <p><span class="paymentIcon">ğŸ“…</span><strong>ì²´í¬ì¸:</strong> <span th:text="${checkIn}"></span></p>
                    <p><span class="paymentIcon">ğŸ“…</span><strong>ì²´í¬ì•„ì›ƒ:</strong> <span th:text="${checkOut}"></span></p>
                    <p><span class="paymentIcon">ğŸ‘¤</span><strong>ì¸ì›:</strong> <span th:text="${userCnt}"></span>ëª…</p>
                    <p><span class="paymentIcon">ğŸ </span><strong>ì˜ˆì•½ ë°©:</strong> <span th:text="${roomtitle}"></span></p>
                </div>
                <div class="paymentInfo">
                    <label for="paymentType"><strong>ê²°ì œ ë°©ë²•:</strong></label>
                    <select id="paymentType" class="form-control">
                        <option value="card" selected>ì¹´ë“œ ê²°ì œ</option>
                        <option value="bank">ë¬´í†µì¥ ì…ê¸ˆ</option>
                    </select>
                </div>
                <div id="cardPayment" class="paymentSel">
                    <div class="form-group">
                        <label for="cardNumber">ì¹´ë“œ ë²ˆí˜¸</label>
                        <input type="text" id="cardNumber" class="form-control" placeholder="1234-5678-9012-3456">
                    </div>
                    <div class="form-group">
                        <label for="cardExpiry">ìœ íš¨ ê¸°ê°„</label>
                        <input type="text" id="cardExpiry" class="form-control" placeholder="MM/YY">
                    </div>
                    <div class="form-group">
                        <label for="cardCVC">CVC</label>
                        <input type="text" id="cardCVC" class="form-control" placeholder="123">
                    </div>
                </div>
                <div id="bankPayment" class="hidden">
                    <div class="form-group">
                        <label for="bankName">ì€í–‰ëª…</label>
                        <input type="text" id="bankName" class="form-control" placeholder="ì€í–‰ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div class="form-group">
                        <label for="accountNumber">ê³„ì¢Œ ë²ˆí˜¸</label>
                        <input type="text" id="accountNumber" class="form-control" placeholder="123-456-789012">
                    </div>
                </div>
                <input type="hidden" id="contentId" name="contentId" th:value="${contentId}">
                <input type="hidden" id="checkIn" name="checkIn" th:value="${checkIn}">
                <input type="hidden" id="checkOut" name="checkOut" th:value="${checkOut}">
                <input type="hidden" id="roomtitle" name="roomtitle" th:value="${roomtitle}">
                <input type="hidden" id="userCnt" name="userCnt" th:value="${userCnt}">
                <button type="button" class="reservBtn" id="reserveBtn">ê²°ì œ</button>
            </div>
        </div>
    </section>
</main>
<footer th:replace="~{layout/footer :: footer}"></footer>
</body>
</html>